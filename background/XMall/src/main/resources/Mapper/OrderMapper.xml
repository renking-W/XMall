<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.renking.xmall.Mapper.OrderMapper">

    <insert id="insertOrder" parameterType="com.renking.xmall.Entity.Order">
        insert into `order`(order_number, user_id, total_price, payment_method, status,address_id, remarks, paid_at)
        values(#{orderNumber},#{userId},#{totalPrice},#{paymentMethod} ,#{status},#{addressId},#{remark},#{paidAt})
    </insert>

    <select id="selectOrderList" resultType="com.renking.xmall.Entity.Order">
        select id, order_number, user_id, total_price, status, payment_method, address_id, remarks, created_at, updated_at, paid_at from `order`
        where user_id = #{userId}
        <if test="status != null">
            and status = #{status}
        </if>
        <if test="orderNumber != null">
            and order_number = #{orderNumber}
        </if>
        <if test="startTime != null">
            and created_at &gt;= #{startTime}
        </if>
        <if test="endTime != null">
            and created_at &lt;= #{endTime}
        </if>
        limit #{page},#{pageSize}
    </select>

    <select id="selectOrderById" resultType="com.renking.xmall.Entity.Order">
        select id, order_number, user_id, total_price, status, payment_method, address_id, remarks, paid_at from `order`
        where id = #{id}
    </select>
</mapper>